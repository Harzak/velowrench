<UserControl x:Class="velowrench.UI.Views.Tools.ChainLengthCalculatorView"
             xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:controls="using:velowrench.UI.Controls"
             xmlns:converters="using:velowrench.UI.Converters"
             xmlns:enums="using:velowrench.Utils.Enums"
             xmlns:materialIcons="clr-namespace:Material.Icons.Avalonia;assembly=Material.Icons.Avalonia"
             xmlns:res="clr-namespace:velowrench.UI.Resources"
             xmlns:vm="using:velowrench.Core.ViewModels"
             x:DataType="vm:Tools.ChainLengthCalculatorViewModel"
             Design.Height="640"
             Design.Width="360">

    <UserControl.Resources>
        <converters:EnumToStringConverter x:Key="EnumToStringConverter" />
    </UserControl.Resources>

    <UserControl.Styles>
        <Style Selector="Border.Group">
            <Setter Property="Background" Value="{DynamicResource SemiColorTertiaryLight}" />
            <Setter Property="Padding" Value="16,12" />
            <Setter Property="CornerRadius" Value="7" />
        </Style>
    </UserControl.Styles>

    <StackPanel Margin="20,10" Orientation="Vertical">

        <Border Classes="Group">
            <TextBlock Text="{x:Static res:Languages.ChainLengthCalculatorHeader}" TextWrapping="Wrap" />
        </Border>

        <!--  Inputs  -->
        <Grid ColumnDefinitions="75*,3*,Auto" RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,Auto">

            <!--  Chain Stay Length  -->
            <controls:LengthUpDown Title="{x:Static res:Languages.ChainStayLength}"
                                   Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="3"
                                   ConvertibleDouble="{Binding ChainStayLength}"
                                   Increment="1" Maximum="3000" Minimum="0.1" />

            <!--  Largest front chainring  -->
            <TextBlock Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2"
                       Margin="0,10,0,3"
                       Text="{x:Static res:Languages.LargestFrontChainring}" />
            <NumericUpDown Grid.Row="2" Grid.Column="0"
                           Increment="1" Maximum="100" Minimum="1" ShowButtonSpinner="False"
                           Value="{Binding TeethLargestChainring, Delay=600}" />
            <ComboBox Grid.Row="2" Grid.Column="2"
                      Width="100"
                      HorizontalAlignment="Stretch"
                      IsEnabled="False"
                      PlaceholderText="{x:Static res:Languages.Teeth}" />

            <!--  Largest rear sprocket  -->
            <TextBlock Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="2"
                       Margin="0,10,0,3"
                       Text="{x:Static res:Languages.LargestRearSprocket}" />
            <NumericUpDown Grid.Row="4" Grid.Column="0"
                           FormatString="0" Increment="1" Maximum="70" Minimum="1"
                           ShowButtonSpinner="False"
                           Value="{Binding TeethLargestSprocket, Delay=600}" />
            <ComboBox Grid.Row="4" Grid.Column="2"
                      Width="100"
                      HorizontalAlignment="Stretch"
                      IsEnabled="False"
                      PlaceholderText="{x:Static res:Languages.Teeth}" />

        </Grid>

        <!--  Calculation Status  -->
        <ContentControl HorizontalAlignment="Stretch" Content="{Binding CurrentState}">
            <ContentControl.DataTemplates>
                <DataTemplate DataType="enums:ECalculatorState">
                    <ContentControl Content="{Binding}">
                        <ContentControl.Styles>

                            <Style Selector="ContentControl[Content=NotStarted]">
                                <Setter Property="ContentTemplate">
                                    <Setter.Value>
                                        <DataTemplate>
                                            <StackPanel Grid.Column="0"
                                                        Margin="0,20,0,25"
                                                        Orientation="Vertical">
                                                <materialIcons:MaterialIcon Width="25" Height="25"
                                                                            HorizontalAlignment="Center" VerticalAlignment="Center"
                                                                            Foreground="{DynamicResource SemiColorTertiary}"
                                                                            Kind="AccountQuestionOutline" />
                                                <TextBlock HorizontalAlignment="Center" VerticalAlignment="Center"
                                                           Text="{x:Static res:Languages.EnterValues}" />
                                                <TextBlock Margin="0,15,0,0" HorizontalAlignment="Center" VerticalAlignment="Center"
                                                           Foreground="{DynamicResource SemiColorWarning}"
                                                           Text="{Binding $parent[UserControl].DataContext.CalculatorInputErrors}"
                                                           TextWrapping="Wrap" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>

                            <Style Selector="ContentControl[Content=InProgress]">
                                <Setter Property="ContentTemplate">
                                    <Setter.Value>
                                        <DataTemplate>
                                            <StackPanel Grid.Column="0"
                                                        Margin="0,20,0,25"
                                                        Orientation="Vertical">
                                                <materialIcons:MaterialIcon Width="25" Height="25"
                                                                            HorizontalAlignment="Center" VerticalAlignment="Center"
                                                                            Foreground="{DynamicResource SemiColorInformation}"
                                                                            Kind="TimerSand" />
                                                <TextBlock Grid.Row="1"
                                                           HorizontalAlignment="Center" VerticalAlignment="Center"
                                                           Text="{x:Static res:Languages.CalculationInProgress}" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>

                            <Style Selector="ContentControl[Content=Computed]">
                                <Setter Property="ContentTemplate">
                                    <Setter.Value>
                                        <DataTemplate>
                                            <Grid RowDefinitions="Auto, Auto, Auto, Auto">
                                                <StackPanel Grid.Column="0"
                                                            Margin="0,20,0,25"
                                                            Orientation="Vertical">
                                                    <materialIcons:MaterialIcon Width="25" Height="25"
                                                                                HorizontalAlignment="Center" VerticalAlignment="Center"
                                                                                Foreground="{DynamicResource SemiColorSuccess}"
                                                                                Kind="CheckBold" />
                                                    <TextBlock Grid.Row="1"
                                                               HorizontalAlignment="Center" VerticalAlignment="Center"
                                                               Text="{x:Static res:Languages.Calculated}" />
                                                </StackPanel>

                                                <TextBlock Grid.Row="1"
                                                           Margin="16,16,16,8" HorizontalAlignment="Left" VerticalAlignment="Center"
                                                           FontSize="12" FontWeight="SemiBold"
                                                           Foreground="{DynamicResource SemiColorTertiary}"
                                                           Text="{x:Static res:Languages.RecommendedValue}" />
                                                <Border Grid.Row="2"
                                                        HorizontalAlignment="Stretch"
                                                        Background="{DynamicResource SemiColorTertiaryLight}"
                                                        CornerRadius="7">
                                                    <Grid Margin="10,10"
                                                          ColumnDefinitions="Auto,Auto" RowDefinitions="Auto,Auto">
                                                        <TextBlock Grid.Row="0" Grid.Column="0"
                                                                   Margin="0,0,10,0" VerticalAlignment="Center"
                                                                   FontWeight="DemiBold"
                                                                   Foreground="{DynamicResource SemiColorText0}"
                                                                   Text="{x:Static res:Languages.ChainLengthLabel}" />
                                                        <controls:LengthTextBlock Grid.Row="0" Grid.Column="1"
                                                                                  HorizontalAlignment="Left" VerticalAlignment="Center"
                                                                                  FontWeight="Bold"
                                                                                  Foreground="{DynamicResource SemiColorSuccess}"
                                                                                  Format="0.00"
                                                                                  Value="{Binding $parent[UserControl].DataContext.RecommendedChainLength}" />
                                                        <TextBlock Grid.Row="1" Grid.Column="0"
                                                                   Margin="0,10,10,0"
                                                                   FontWeight="DemiBold"
                                                                   Foreground="{DynamicResource SemiColorText0}"
                                                                   Text="{x:Static res:Languages.ChainLinksLabel}" />
                                                        <TextBlock Grid.Row="1" Grid.Column="1"
                                                                   Margin="0,10,0,0" HorizontalAlignment="Left"
                                                                   FontWeight="Bold"
                                                                   Foreground="{DynamicResource SemiColorSuccess}"
                                                                   Text="{Binding $parent[UserControl].DataContext.RecommendedChainLinks}" />
                                                    </Grid>
                                                </Border>
                                            </Grid>
                                        </DataTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>

                            <Style Selector="ContentControl[Content=Failed]">
                                <Setter Property="ContentTemplate">
                                    <Setter.Value>
                                        <DataTemplate>
                                            <Grid RowDefinitions="Auto, Auto, Auto, Auto">
                                                <StackPanel Grid.Column="0"
                                                            Margin="0,20,0,25"
                                                            Orientation="Vertical">
                                                    <materialIcons:MaterialIcon Width="25" Height="25"
                                                                                HorizontalAlignment="Center" VerticalAlignment="Center"
                                                                                Foreground="{DynamicResource SemiColorDanger}"
                                                                                Kind="ErrorOutline" />
                                                    <TextBlock Grid.Row="1"
                                                               HorizontalAlignment="Center" VerticalAlignment="Center"
                                                               Text="{x:Static res:Languages.CalculationFailed}" />
                                                </StackPanel>
                                            </Grid>
                                        </DataTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>

                            <Style Selector="ContentControl[Content=Unknown]">
                                <Setter Property="ContentTemplate">
                                    <Setter.Value>
                                        <DataTemplate>
                                            <Grid RowDefinitions="Auto, Auto, Auto, Auto">
                                                <StackPanel Grid.Column="0"
                                                            Margin="0,20,0,25"
                                                            Orientation="Vertical">
                                                    <materialIcons:MaterialIcon Width="25" Height="25"
                                                                                HorizontalAlignment="Center" VerticalAlignment="Center"
                                                                                Foreground="{DynamicResource SemiColorWarning}"
                                                                                Kind="CloseCircleOutline" />
                                                    <TextBlock Grid.Row="1"
                                                               HorizontalAlignment="Center" VerticalAlignment="Center"
                                                               Text="{x:Static res:Languages.SomethingWentWrong}" />
                                                </StackPanel>
                                            </Grid>
                                        </DataTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>

                        </ContentControl.Styles>
                    </ContentControl>
                </DataTemplate>
            </ContentControl.DataTemplates>
        </ContentControl>

    </StackPanel>
</UserControl>
